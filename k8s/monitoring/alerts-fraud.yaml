apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: fraud-pipeline-alerts
  namespace: monitoring
  labels:
    release: monitoring    # must match your kube-prometheus-stack Helm release
spec:
  groups:
    - name: fraud-pipeline.rules
      rules:
        - alert: FraudConsumerDown
          expr: |
            kube_deployment_status_replicas_available{
              namespace="fraud",
              deployment="fraud-consumer"
            } < 1
          for: 1m
          labels:
            severity: warning
          annotations:
            summary: "Fraud consumer is down"
            description: "Deployment fraud-consumer in namespace 'fraud' has no available replicas."

